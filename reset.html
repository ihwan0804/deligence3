<!doctype html>
<html><head><meta charset="utf-8"><title>DLU Reset</title></head>
<body style="font-family:system-ui; padding:20px">
  <h1>DLU 캐시/서비스워커 초기화</h1>
  <p>이 페이지는 이 사이트의 서비스워커와 캐시를 제거합니다.</p>
  <button id="btn">초기화 실행</button>
  <pre id="out"></pre>
  <script>
    async function run(){
      const out = document.getElementById('out');
      const logs = [];
      function log(x){ logs.push(x); out.textContent = logs.join('\n'); }
      if('serviceWorker' in navigator){
        const regs = await navigator.serviceWorker.getRegistrations();
        for(const r of regs){ try{ await r.unregister(); log('SW unregister: ' + (r.active && r.active.scriptURL || r.scriptURL)); }catch(e){ log('SW error: ' + e); } }
      }
      if('caches' in window){
        const names = await caches.keys();
        for(const n of names){ try{ await caches.delete(n); log('Cache deleted: ' + n); }catch(e){ log('Cache error: ' + e); } }
      }
      log('완료! 이제 원래 주소를 새로고침하세요.');
    }
    document.getElementById('btn').addEventListener('click', run);
  </script>
</body></html>